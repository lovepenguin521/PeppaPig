---
name: "systematic-bug-fixer"
description: "系统化追踪和修复 Bug，通过记录失败尝试并从历史中学习来提高修复成功率。当用户要求修复 Bug 或修复失败时调用。"
---

# 系统化 Bug 修复师 (Systematic Bug Fixer)

此 Skill 强制执行一种严谨的 Bug 修复流程，确保从失败的尝试中吸取教训，并将经验记录下来以指导未来的策略。

## 工作流程 (Workflow)

### 0. 定义与复现 (Define & Reproduce)
- **动作**：在动手前，明确“Bug 是什么”以及“如何证明它存在”。
- **要求**：
  - 提取用户的原始报错或描述。
  - **制定复现步骤**：明确如何触发该 Bug。
  - **定义预期行为**：修复后应该是什么样子。

### 1. 识别与检索历史 (Identify & Retrieve History)
- **触发条件**：当被要求修复 Bug 时。
- **动作**：在 `questions/` 目录下搜索相关的 `[问题类型]排查指南.md` (Troubleshooting Guide)。
  - *命名规范*：`questions/[问题类型]排查指南.md` (例如：`questions/[灵动岛综合问题]排查指南.md`)。
- **决策**：
  - 如果文件**存在**：**立即阅读**。特别关注“已尝试的修复方法及失败原因”部分。
  - 如果文件**不存在**：使用下方的模板**立即创建**。

### 2. 分析与验证计划 (Analyze & Verification Plan)
- **动作**：在编写任何代码之前，基于以下信息分析当前情况：
  - 用户的最新反馈。
  - 历史失败记录（如果有）。
- **策略**：
  - **绝对不要**重复标记为 ❌ (失败) 的方法。
  - **强制制定验证计划**：在修改代码前，写下“我将如何验证修复有效性”（例如：查看日志特定字段、观察特定 UI 变化）。
  - **风险评估**：思考“这个修复可能有什么副作用？”。

### 3. 执行修复 (Execute Fix)
- **动作**：实施代码变更。
- **自测**：执行上述“验证计划”。
  - 如果可以，编写自动化测试或脚本进行验证。
  - 如果无法自动验证，请详细描述手动验证的预期结果。

### 4. 记录结果与反思 (Record Result & Reflect) - **关键步骤**
- **动作**：更新 `[问题类型]排查指南.md` 文档。
- **如果失败 (❌)**（用户反馈未解决）：
  - **认知差异分析**：为什么我以为解决了，但实际上没解决？（关键反思）
  - 记录具体的失败现象/报错。
  - 分析根本原因。
  - 标记为 ❌。
- **如果成功 (✅)**：
  - 记录成功的方法。
  - 总结成功的关键原因。
  - 标记为 ✅。

## 文档模板 (Document Template)

```markdown
# [问题类型]排查指南

## 1. 问题定义
- **原始描述**: (用户的原话)
- **复现步骤**: 
  1. ...
  2. ...
- **预期行为**: ...

## 2. 历史修复尝试与反思 (按时间倒序)

### [第 N 次尝试] (日期 - 状态: ❌/✅)
- **核心假设**: (我认为问题出在...)
- **实施方案**: (修改了什么文件/逻辑)
- **验证计划**: (我当时是如何验证的)
- **实际结果**: 
  - (用户反馈/实际表现)
- **差异分析 (为何失败)**: 
  - (关键！为什么之前的验证计划失效了？是环境不同？还是理解错误？)
- **代码快照/Diff**: (关键代码片段或链接)

---

## 3. 深层问题分析
(分析根本原因、架构冲突、环境差异等)

## 4. 当前排查策略
1. (新策略 1 - 及其背后的逻辑)
2. (新策略 2)

## 5. 调试工具与日志
- (使用的工具、关键日志关键词)

## 更新记录
- (日期): (操作)
```

## 用户指令 (User Instructions)
- 当用户说“修复这个 bug”或“还是不行”时，**必须**调用此 Skill 逻辑。
- **切勿**在未检查或创建文档的情况下盲目尝试修复。